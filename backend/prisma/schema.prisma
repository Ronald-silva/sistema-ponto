generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id          String   @id @default(uuid())
  nome        String
  cpf         String   @unique
  cargo       String?
  status      String   @default("ATIVO") // ATIVO ou INATIVO
  perfil      String   @default("FUNCIONARIO") // ADMIN ou FUNCIONARIO
  obraAtual   String   // Mantemos como string por enquanto
  registros   RegistroPonto[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Obra {
  id              String    @id @default(uuid())
  nome            String
  status          String    @default("ATIVA") // ATIVA ou INATIVA
  dataInicio      DateTime  @default(now())
  dataPrevisao    DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model RegistroPonto {
  id          String   @id @default(uuid())
  usuario     Usuario  @relation(fields: [usuarioId], references: [id])
  usuarioId   String
  tipo        String   // 'ENTRADA' ou 'SAIDA'
  dataHora    DateTime @default(now())
  foto        String?  
  processado  Boolean  @default(false)
  horasExtras Float?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
} 